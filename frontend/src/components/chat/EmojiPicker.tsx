import { useState, useRef, useEffect } from "react";
import styles from "./EmojiPicker.module.css";
import { FixedSizeGrid as Grid, GridChildComponentProps } from "react-window";

const EMOJI_SIZE = 40; // Size of each emoji cell
const COLUMNS = 8; // Number of columns in the grid

const emojiCategories = {
	smileys: [
		"ðŸ˜€",
		"ðŸ˜ƒ",
		"ðŸ˜„",
		"ðŸ˜",
		"ðŸ˜†",
		"ðŸ˜…",
		"ðŸ˜‚",
		"ðŸ¤£",
		"ðŸ˜Š",
		"ðŸ˜‡",
		"ðŸ™‚",
		"ðŸ™ƒ",
		"ðŸ˜‰",
		"ðŸ˜Œ",
		"ðŸ˜",
		"ðŸ¥°",
		"ðŸ˜˜",
		"ðŸ˜—",
		"ðŸ˜™",
		"ðŸ˜š",
		"ðŸ˜‹",
		"ðŸ˜›",
		"ðŸ˜",
		"ðŸ˜œ",
		"ðŸ¤ª",
		"ðŸ¤¨",
		"ðŸ§",
		"ðŸ¤“",
		"ðŸ˜Ž",
		"ðŸ¥¸",
		"ðŸ¤©",
		"ðŸ¥³",
		"ðŸ˜",
		"ðŸ˜’",
		"ðŸ˜ž",
		"ðŸ˜”",
		"ðŸ˜Ÿ",
		"ðŸ˜•",
		"ðŸ™",
		"â˜¹ï¸",
		"ðŸ˜£",
		"ðŸ˜–",
		"ðŸ˜«",
		"ðŸ˜©",
		"ðŸ¥º",
		"ðŸ˜¢",
		"ðŸ˜­",
		"ðŸ˜¤",
		"ðŸ˜ ",
		"ðŸ˜¡",
		"ðŸ¤¬",
		"ðŸ¤¯",
		"ðŸ˜³",
		"ðŸ¥µ",
		"ðŸ¥¶",
		"ðŸ˜±",
		"ðŸ˜¨",
		"ðŸ˜°",
		"ðŸ˜¥",
		"ðŸ˜“",
		"ðŸ¤—",
		"ðŸ¤”",
		"ðŸ¤­",
		"ðŸ¤«",
		"ðŸ¤¥",
		"ðŸ˜¶",
		"ðŸ˜",
		"ðŸ˜‘",
		"ðŸ˜¬",
		"ðŸ™„",
		"ðŸ˜¯",
		"ðŸ˜¦",
		"ðŸ˜§",
		"ðŸ˜®",
		"ðŸ˜²",
		"ðŸ¥±",
		"ðŸ˜´",
		"ðŸ¤¤",
		"ðŸ˜ª",
		"ðŸ˜µ",
		"ðŸ¤",
		"ðŸ¥´",
		"ðŸ¤¢",
		"ðŸ¤®",
		"ðŸ¤§",
		"ðŸ˜·",
		"ðŸ¤’",
		"ðŸ¤•",
		"ðŸ¤‘",
		"ðŸ¤ ",
		"ðŸ˜ˆ",
		"ðŸ‘¿",
		"ðŸ‘¹",
		"ðŸ‘º",
		"ðŸ¤¡",
		"ðŸ’©",
		"ðŸ‘»",
		"ðŸ’€",
		"â˜ ï¸",
		"ðŸ‘½",
		"ðŸ‘¾",
		"ðŸ¤–",
		"ðŸŽƒ",
		"ðŸ˜º",
		"ðŸ˜¸",
		"ðŸ˜¹",
		"ðŸ˜»",
		"ðŸ˜¼",
		"ðŸ˜½",
		"ðŸ™€",
		"ðŸ˜¿",
		"ðŸ˜¾",
	],
	animals: [
		"ðŸ¶",
		"ðŸ±",
		"ðŸ­",
		"ðŸ¹",
		"ðŸ°",
		"ðŸ¦Š",
		"ðŸ»",
		"ðŸ¼",
		"ðŸ»â€â„ï¸",
		"ðŸ¨",
		"ðŸ¯",
		"ðŸ¦",
		"ðŸ®",
		"ðŸ·",
		"ðŸ½",
		"ðŸ¸",
		"ðŸµ",
		"ðŸ™ˆ",
		"ðŸ™‰",
		"ðŸ™Š",
		"ðŸ’",
		"ðŸ”",
		"ðŸ§",
		"ðŸ¦",
		"ðŸ¤",
		"ðŸ£",
		"ðŸ¥",
		"ðŸ¦†",
		"ðŸ¦…",
		"ðŸ¦‰",
		"ðŸ¦‡",
		"ðŸº",
		"ðŸ—",
		"ðŸ´",
		"ðŸ¦„",
		"ðŸ",
		"ðŸª±",
		"ðŸ›",
		"ðŸ¦‹",
		"ðŸŒ",
		"ðŸž",
		"ðŸœ",
		"ðŸª°",
		"ðŸª²",
		"ðŸª³",
		"ðŸ¦Ÿ",
		"ðŸ¦—",
		"ðŸ•·ï¸",
		"ðŸ¦‚",
		"ðŸ¢",
		"ðŸ",
		"ðŸ¦Ž",
		"ðŸ¦–",
		"ðŸ¦•",
		"ðŸ™",
		"ðŸ¦‘",
		"ðŸ¦",
		"ðŸ¦ž",
		"ðŸ¦€",
		"ðŸ¡",
		"ðŸ ",
		"ðŸŸ",
		"ðŸ¬",
		"ðŸ³",
		"ðŸ‹",
		"ðŸ¦ˆ",
		"ðŸŠ",
		"ðŸ…",
		"ðŸ†",
		"ðŸ¦“",
		"ðŸ¦",
		"ðŸ¦§",
		"ðŸ¦£",
		"ðŸ˜",
		"ðŸ¦›",
		"ðŸ¦",
		"ðŸª",
		"ðŸ«",
		"ðŸ¦’",
		"ðŸ¦˜",
		"ðŸ¦¬",
		"ðŸƒ",
		"ðŸ‚",
		"ðŸ„",
		"ðŸŽ",
		"ðŸ–",
		"ðŸ",
		"ðŸ‘",
		"ðŸ¦™",
		"ðŸ",
		"ðŸ¦Œ",
		"ðŸ•",
		"ðŸ©",
		"ðŸ¦®",
		"ðŸ•â€ðŸ¦º",
		"ðŸˆ",
		"ðŸˆâ€â¬›",
		"ðŸª¶",
		"ðŸ“",
		"ðŸ¦ƒ",
		"ðŸ¦¤",
		"ðŸ¦š",
		"ðŸ¦œ",
		"ðŸ¦¢",
		"ðŸ¦©",
		"ðŸ•Šï¸",
		"ðŸ‡",
		"ðŸ¦",
		"ðŸ¦¨",
		"ðŸ¦¡",
		"ðŸ¦«",
		"ðŸ¦¦",
		"ðŸ¦¥",
		"ðŸ",
		"ðŸ€",
		"ðŸ¿ï¸",
		"ðŸ¦”",
	],
	objects: [
		"ðŸ’",
		"ðŸ’Ž",
		"ðŸ”ª",
		"ðŸª“",
		"ðŸ§¨",
		"ðŸ’£",
		"ðŸ”«",
		"ðŸªƒ",
		"ðŸ¹",
		"ðŸ›¡ï¸",
		"ðŸ”§",
		"ðŸ”¨",
		"ðŸª›",
		"ðŸ”©",
		"âš™ï¸",
		"ðŸ§±",
		"â›“ï¸",
		"ðŸ§²",
		"ðŸ”«",
		"ðŸ’‰",
		"ðŸ©¸",
		"ðŸ’Š",
		"ðŸ©¹",
		"ðŸ©º",
		"ðŸšª",
		"ðŸª‘",
		"ðŸ›ï¸",
		"ðŸ›‹ï¸",
		"ðŸªŸ",
		"ðŸªž",
		"ðŸ›ï¸",
		"ðŸ›’",
		"ðŸŽ",
		"ðŸŽˆ",
		"ðŸŽ",
		"ðŸŽ€",
		"ðŸŽŠ",
		"ðŸŽ‰",
		"ðŸŽŽ",
		"ðŸ®",
		"ðŸª”",
		"ðŸ§§",
		"âœ‰ï¸",
		"ðŸ“©",
		"ðŸ“¨",
		"ðŸ“§",
		"ðŸ’Œ",
		"ðŸ“¥",
		"ðŸ“¤",
		"ðŸ“¦",
		"ðŸ·ï¸",
		"ðŸ“ª",
		"ðŸ“«",
		"ðŸ“¬",
		"ðŸ“­",
		"ðŸ“®",
		"ðŸ“¯",
		"ðŸ“œ",
		"ðŸ“ƒ",
		"ðŸ“„",
		"ðŸ“‘",
		"ðŸ§¾",
		"ðŸ“Š",
		"ðŸ“ˆ",
		"ðŸ“‰",
		"ðŸ“…",
		"ðŸ“†",
		"ðŸ—“ï¸",
		"ðŸ“‡",
		"ðŸ—ƒï¸",
		"ðŸ—³ï¸",
		"ðŸ—„ï¸",
		"ðŸ“‹",
		"ðŸ“",
		"ðŸ“‚",
		"ðŸ—‚ï¸",
		"ðŸ—’ï¸",
		"ðŸ—“ï¸",
		"ðŸ“’",
		"ðŸ“”",
		"ðŸ“•",
		"ðŸ“—",
		"ðŸ“˜",
		"ðŸ“™",
		"ðŸ“š",
		"ðŸ““",
		"ðŸ“–",
		"ðŸ§·",
		"ðŸ”–",
		"ðŸ·ï¸",
		"ðŸ’°",
		"ðŸª™",
		"ðŸ’´",
		"ðŸ’µ",
		"ðŸ’¶",
		"ðŸ’·",
		"ðŸ’¸",
		"ðŸ’³",
		"ðŸ§¾",
		"ðŸ’¹",
		"âœ‚ï¸",
		"ðŸ–Šï¸",
		"ðŸ–‹ï¸",
		"âœ’ï¸",
		"ðŸ–Œï¸",
		"ðŸ–ï¸",
		"ðŸ“",
		"âœï¸",
		"ðŸ”",
		"ðŸ”Ž",
		"ðŸ”",
		"ðŸ”",
		"ðŸ”’",
		"ðŸ”“",
	],
	symbols: [
		"â¤ï¸",
		"ðŸ§¡",
		"ðŸ’›",
		"ðŸ’š",
		"ðŸ’™",
		"ðŸ’œ",
		"ðŸ¤Ž",
		"ðŸ–¤",
		"ðŸ¤",
		"ðŸ’”",
		"â£ï¸",
		"ðŸ’•",
		"ðŸ’ž",
		"ðŸ’“",
		"ðŸ’—",
		"ðŸ’–",
		"ðŸ’˜",
		"ðŸ’",
		"ðŸ’Ÿ",
		"â˜®ï¸",
		"âœï¸",
		"â˜ªï¸",
		"ðŸ•‰ï¸",
		"â˜¸ï¸",
		"âœ¡ï¸",
		"ðŸ”¯",
		"ðŸ•Ž",
		"â˜¯ï¸",
		"â˜¦ï¸",
		"ðŸ›",
		"â›Ž",
		"â™ˆ",
		"â™‰",
		"â™Š",
		"â™‹",
		"â™Œ",
		"â™",
		"â™Ž",
		"â™",
		"â™",
		"â™‘",
		"â™’",
		"â™“",
		"ðŸ†”",
		"âš›ï¸",
		"ðŸ‰‘",
		"â˜¢ï¸",
		"â˜£ï¸",
		"ðŸ“´",
		"ðŸ“³",
		"ðŸˆ¶",
		"ðŸˆš",
		"ðŸˆ¸",
		"ðŸˆº",
		"ðŸˆ·ï¸",
		"âœ´ï¸",
		"ðŸ†š",
		"ðŸ’®",
		"ðŸ‰",
		"ãŠ™ï¸",
		"ãŠ—ï¸",
		"ðŸˆ´",
		"ðŸˆµ",
		"ðŸˆ¹",
		"ðŸˆ²",
		"ðŸ…°ï¸",
		"ðŸ…±ï¸",
		"ðŸ†Ž",
		"ðŸ†‘",
		"ðŸ…¾ï¸",
		"ðŸ†˜",
		"âŒ",
		"â­•",
		"ðŸ›‘",
		"â›”",
		"ðŸ“›",
		"ðŸš«",
		"ðŸ’¯",
		"ðŸ’¢",
		"â™¨ï¸",
		"ðŸš·",
		"ðŸš¯",
		"ðŸš³",
		"ðŸš±",
		"ðŸ”ž",
		"ðŸ“µ",
		"ðŸš­",
		"â—",
		"â•",
		"â“",
		"â”",
		"â€¼ï¸",
		"â‰ï¸",
		"ðŸ”…",
		"ðŸ”†",
		"ã€½ï¸",
		"âš ï¸",
		"ðŸš¸",
		"ðŸ”±",
		"âšœï¸",
		"ðŸ”°",
		"â™»ï¸",
		"âœ…",
		"ðŸˆ¯",
		"ðŸ’¹",
		"â‡ï¸",
		"âœ³ï¸",
		"âŽ",
		"ðŸŒ",
		"ðŸ’ ",
		"â“‚ï¸",
		"ðŸŒ€",
		"ðŸ’¤",
		"ðŸ§",
		"ðŸš¾",
		"â™¿",
		"ðŸ…¿ï¸",
		"ðŸˆ³",
		"ðŸˆ‚ï¸",
		"ðŸ›‚",
		"ðŸ›ƒ",
		"ðŸ›„",
		"ðŸ›…",
		"ðŸš¹",
		"ðŸšº",
		"ðŸš¼",
		"ðŸš»",
		"ðŸš®",
		"ðŸŽ¦",
		"ðŸ“¶",
		"ðŸˆ",
		"ðŸ”£",
		"â„¹ï¸",
		"ðŸ”¤",
		"ðŸ”¡",
		"ðŸ” ",
		"ðŸ†–",
		"ðŸ†—",
		"ðŸ†™",
		"ðŸ†’",
		"ðŸ†•",
		"ðŸ†“",
		"0ï¸âƒ£",
		"1ï¸âƒ£",
		"2ï¸âƒ£",
		"3ï¸âƒ£",
		"4ï¸âƒ£",
		"5ï¸âƒ£",
		"6ï¸âƒ£",
		"7ï¸âƒ£",
		"8ï¸âƒ£",
		"9ï¸âƒ£",
		"ðŸ”Ÿ",
		"ðŸ”¢",
		"#ï¸âƒ£",
		"*ï¸âƒ£",
		"âï¸",
		"â–¶ï¸",
		"â¸",
		"â¯",
		"â¹",
		"âº",
		"â­",
		"â®",
		"â©",
		"âª",
		"â«",
		"â¬",
		"â—€ï¸",
		"ðŸ”¼",
		"ðŸ”½",
		"âž¡ï¸",
		"â¬…ï¸",
		"â¬†ï¸",
		"â¬‡ï¸",
		"â†—ï¸",
		"â†˜ï¸",
		"â†™ï¸",
		"â†–ï¸",
		"â†•ï¸",
		"â†”ï¸",
		"â†ªï¸",
		"â†©ï¸",
		"â¤´ï¸",
		"â¤µï¸",
		"ðŸ”€",
		"ðŸ”",
		"ðŸ”‚",
		"ðŸ”„",
		"ðŸ”ƒ",
		"ðŸŽµ",
		"ðŸŽ¶",
		"âž•",
		"âž–",
		"âž—",
		"âœ–ï¸",
		"â™¾ï¸",
		"ðŸ’²",
		"ðŸ’±",
		"â„¢ï¸",
		"Â©ï¸",
		"Â®ï¸",
		"ã€°ï¸",
		"âž°",
		"âž¿",
		"ðŸ”š",
		"ðŸ”™",
		"ðŸ”›",
		"ðŸ”",
		"ðŸ”œ",
		"âœ”ï¸",
		"â˜‘ï¸",
		"ðŸ”˜",
		"ðŸ”´",
		"ðŸŸ ",
		"ðŸŸ¡",
		"ðŸŸ¢",
		"ðŸ”µ",
		"ðŸŸ£",
		"âš«",
		"âšª",
		"ðŸŸ¤",
		"ðŸ”º",
		"ðŸ”»",
		"ðŸ”¸",
		"ðŸ”¹",
		"ðŸ”¶",
		"ðŸ”·",
		"ðŸ”³",
		"ðŸ”²",
		"â–ªï¸",
		"â–«ï¸",
		"â—¾",
		"â—½",
		"â—¼ï¸",
		"â—»ï¸",
		"ðŸŸ¥",
		"ðŸŸ§",
		"ðŸŸ¨",
		"ðŸŸ©",
		"ðŸŸ¦",
		"ðŸŸª",
		"â¬›",
		"â¬œ",
		"ðŸŸ«",
		"ðŸ”ˆ",
		"ðŸ”‡",
		"ðŸ”‰",
		"ðŸ”Š",
		"ðŸ””",
		"ðŸ”•",
		"ðŸ“£",
		"ðŸ“¢",
		"ðŸ‘ï¸â€ðŸ—¨ï¸",
		"ðŸ’¬",
		"ðŸ’­",
		"ðŸ—¯ï¸",
		"â™ ï¸",
		"â™£ï¸",
		"â™¥ï¸",
		"â™¦ï¸",
		"ðŸƒ",
		"ðŸŽ´",
		"ðŸ€„",
		"ðŸ•",
		"ðŸ•‘",
		"ðŸ•’",
		"ðŸ•“",
		"ðŸ•”",
		"ðŸ••",
		"ðŸ•–",
		"ðŸ•—",
		"ðŸ•˜",
		"ðŸ•™",
		"ðŸ•š",
		"ðŸ•›",
		"ðŸ•œ",
		"ðŸ•",
		"ðŸ•ž",
		"ðŸ•Ÿ",
		"ðŸ• ",
		"ðŸ•¡",
		"ðŸ•¢",
		"ðŸ•£",
		"ðŸ•¤",
		"ðŸ•¥",
		"ðŸ•¦",
		"ðŸ•§",
	],
	food: [
		"ðŸ",
		"ðŸŽ",
		"ðŸ",
		"ðŸŠ",
		"ðŸ‹",
		"ðŸŒ",
		"ðŸ‰",
		"ðŸ‡",
		"ðŸ“",
		"ðŸ«",
		"ðŸˆ",
		"ðŸ’",
		"ðŸ‘",
		"ðŸ¥­",
		"ðŸ",
		"ðŸ¥¥",
		"ðŸ¥",
		"ðŸ…",
		"ðŸ†",
		"ðŸ¥‘",
		"ðŸ¥¦",
		"ðŸ¥¬",
		"ðŸ¥’",
		"ðŸŒ¶ï¸",
		"ðŸ«‘",
		"ðŸŒ½",
		"ðŸ¥•",
		"ðŸ«’",
		"ðŸ§„",
		"ðŸ§…",
		"ðŸ¥”",
		"ðŸ ",
		"ðŸ¥",
		"ðŸ¥¯",
		"ðŸž",
		"ðŸ¥–",
		"ðŸ¥¨",
		"ðŸ§€",
		"ðŸ¥š",
		"ðŸ³",
		"ðŸ§ˆ",
		"ðŸ¥ž",
		"ðŸ§‡",
		"ðŸ¥“",
		"ðŸ¥©",
		"ðŸ—",
		"ðŸ–",
		"ðŸ¦´",
		"ðŸŒ­",
		"ðŸ”",
		"ðŸŸ",
		"ðŸ•",
		"ðŸ«“",
		"ðŸ¥ª",
		"ðŸ¥™",
		"ðŸ§†",
		"ðŸŒ®",
		"ðŸŒ¯",
		"ðŸ«”",
		"ðŸ¥—",
		"ðŸ¥˜",
		"ðŸ«•",
		"ðŸ¥«",
		"ðŸ",
		"ðŸœ",
		"ðŸ²",
		"ðŸ›",
		"ðŸ£",
		"ðŸ±",
		"ðŸ¥Ÿ",
		"ðŸ¦ª",
		"ðŸ¤",
		"ðŸ™",
		"ðŸš",
		"ðŸ˜",
		"ðŸ¥",
		"ðŸ¥ ",
		"ðŸ¥®",
		"ðŸ¢",
		"ðŸ¡",
		"ðŸ§",
		"ðŸ¨",
		"ðŸ¦",
		"ðŸ¥§",
		"ðŸ§",
		"ðŸ°",
		"ðŸŽ‚",
		"ðŸ®",
		"ðŸ­",
		"ðŸ¬",
		"ðŸ«",
		"ðŸ¿",
		"ðŸ©",
		"ðŸª",
		"ðŸŒ°",
		"ðŸ¥œ",
		"ðŸ«˜",
		"ðŸ¯",
	],
	travel: [
		"ðŸš—",
		"ðŸš•",
		"ðŸš™",
		"ðŸšŒ",
		"ðŸšŽ",
		"ðŸŽï¸",
		"ðŸš“",
		"ðŸš‘",
		"ðŸš’",
		"ðŸš",
		"ðŸ›»",
		"ðŸšš",
		"ðŸš›",
		"ðŸšœ",
		"ðŸ¦¯",
		"ðŸ¦½",
		"ðŸ¦¼",
		"ðŸ›´",
		"ðŸš²",
		"ðŸ›µ",
		"ðŸï¸",
		"ðŸ›º",
		"ðŸš¨",
		"ðŸš”",
		"ðŸš",
		"ðŸš˜",
		"ðŸš–",
		"ðŸš¡",
		"ðŸš ",
		"ðŸšŸ",
		"ðŸšƒ",
		"ðŸš‹",
		"ðŸšž",
		"ðŸš",
		"ðŸš„",
		"ðŸš…",
		"ðŸšˆ",
		"ðŸš‚",
		"ðŸš†",
		"ðŸš‡",
		"ðŸšŠ",
		"ðŸš‰",
		"âœˆï¸",
		"ðŸ›«",
		"ðŸ›¬",
		"ðŸ›©ï¸",
		"ðŸ’º",
		"ðŸ›°ï¸",
		"ðŸš€",
		"ðŸ›¸",
		"ðŸš",
		"ðŸ›¶",
		"â›µ",
		"ðŸš¤",
		"ðŸ›¥ï¸",
		"ðŸ›³ï¸",
		"â›´ï¸",
		"ðŸš¢",
		"âš“",
		"ðŸ›Ÿ",
		"ðŸš§",
		"â›½",
		"ðŸš",
		"ðŸš¦",
		"ðŸš¥",
		"ðŸ—ºï¸",
		"ðŸ—¿",
		"ðŸ—½",
		"ðŸ—¼",
		"ðŸ°",
		"ðŸ¯",
		"ðŸŸï¸",
		"ðŸŽ¡",
		"ðŸŽ¢",
		"ðŸŽ ",
		"â›²",
		"â›±ï¸",
		"ðŸ–ï¸",
		"ðŸï¸",
		"ðŸœï¸",
		"ðŸŒ‹",
		"â›°ï¸",
		"ðŸ”ï¸",
		"ðŸ—»",
		"ðŸ•ï¸",
		"â›º",
		"ðŸ›–",
		"ðŸ ",
		"ðŸ¡",
		"ðŸ˜ï¸",
		"ðŸšï¸",
		"ðŸ—ï¸",
		"ðŸ­",
		"ðŸ¢",
		"ðŸ¬",
		"ðŸ£",
		"ðŸ¤",
		"ðŸ¥",
		"ðŸ¦",
		"ðŸ¨",
		"ðŸª",
		"ðŸ«",
		"ðŸ©",
		"ðŸ’’",
		"ðŸ›ï¸",
		"â›ª",
		"ðŸ•Œ",
		"ðŸ›•",
		"ðŸ•",
		"â›©ï¸",
		"ðŸ•‹",
		"â›²",
		"ðŸŽª",
		"ðŸŽ­",
		"ðŸ–¼ï¸",
		"ðŸŽ¨",
		"ðŸ§µ",
		"ðŸª¡",
		"ðŸ§¶",
		"ðŸª¢",
		"ðŸ‘“",
		"ðŸ•¶ï¸",
		"ðŸ¥½",
		"ðŸ¥¼",
		"ðŸ¦º",
		"ðŸ‘”",
		"ðŸ‘•",
		"ðŸ‘–",
		"ðŸ§£",
		"ðŸ§¤",
		"ðŸ§¥",
		"ðŸ§¦",
		"ðŸ‘—",
		"ðŸ‘˜",
		"ðŸ¥»",
		"ðŸ©±",
		"ðŸ©²",
		"ðŸ©³",
		"ðŸ‘™",
		"ðŸ‘š",
		"ðŸ‘›",
		"ðŸ‘œ",
		"ðŸ‘",
		"ðŸŽ’",
		"ðŸ©´",
		"ðŸ‘ž",
		"ðŸ‘Ÿ",
		"ðŸ¥¾",
		"ðŸ¥¿",
		"ðŸ‘ ",
		"ðŸ‘¡",
		"ðŸ©°",
		"ðŸ‘¢",
		"ðŸ‘‘",
		"ðŸ‘’",
		"ðŸŽ©",
		"ðŸŽ“",
		"ðŸ§¢",
		"ðŸª–",
		"â›‘ï¸",
		"ðŸ’„",
		"ðŸ’",
		"ðŸ’¼",
	],
	flags: [
		"ðŸ³ï¸",
		"ðŸ´",
		"ðŸ´â€â˜ ï¸",
		"ðŸ",
		"ðŸš©",
		"ðŸ³ï¸â€âš§ï¸",
		"ðŸ‡¦ðŸ‡«",
		"ðŸ‡¦ðŸ‡½",
		"ðŸ‡¦ðŸ‡±",
		"ðŸ‡©ðŸ‡¿",
		"ðŸ‡¦ðŸ‡¸",
		"ðŸ‡¦ðŸ‡©",
		"ðŸ‡¦ðŸ‡´",
		"ðŸ‡¦ðŸ‡®",
		"ðŸ‡¦ðŸ‡¶",
		"ðŸ‡¦ðŸ‡¬",
		"ðŸ‡¦ðŸ‡·",
		"ðŸ‡¦ðŸ‡²",
		"ðŸ‡¦ðŸ‡¼",
		"ðŸ‡¦ðŸ‡º",
		"ðŸ‡¦ðŸ‡¹",
		"ðŸ‡¦ðŸ‡¿",
		"ðŸ‡§ðŸ‡¸",
		"ðŸ‡§ðŸ‡­",
		"ðŸ‡§ðŸ‡©",
		"ðŸ‡§ðŸ‡ª",
		"ðŸ‡§ðŸ‡¿",
		"ðŸ‡§ðŸ‡¯",
		"ðŸ‡§ðŸ‡²",
		"ðŸ‡§ðŸ‡¹",
		"ðŸ‡§ðŸ‡´",
		"ðŸ‡§ðŸ‡¦",
		"ðŸ‡§ðŸ‡¼",
		"ðŸ‡§ðŸ‡·",
		"ðŸ‡®ðŸ‡´",
		"ðŸ‡»ðŸ‡¬",
		"ðŸ‡§ðŸ‡³",
		"ðŸ‡§ðŸ‡¬",
		"ðŸ‡§ðŸ‡«",
		"ðŸ‡§ðŸ‡®",
		"ðŸ‡¨ðŸ‡»",
		"ðŸ‡°ðŸ‡­",
		"ðŸ‡¨ðŸ‡²",
		"ðŸ‡¨ðŸ‡¦",
		"ðŸ‡®ðŸ‡¨",
		"ðŸ‡¨ðŸ‡«",
		"ðŸ‡¹ðŸ‡©",
		"ðŸ‡¨ðŸ‡±",
		"ðŸ‡¨ðŸ‡³",
		"ðŸ‡¨ðŸ‡½",
		"ðŸ‡¨ðŸ‡¨",
		"ðŸ‡¨ðŸ‡´",
		"ðŸ‡°ðŸ‡²",
		"ðŸ‡¨ðŸ‡¬",
		"ðŸ‡¨ðŸ‡©",
		"ðŸ‡¨ðŸ‡°",
		"ðŸ‡¨ðŸ‡·",
		"ðŸ‡¨ðŸ‡®",
		"ðŸ‡­ðŸ‡·",
		"ðŸ‡¨ðŸ‡º",
		"ðŸ‡¨ðŸ‡¼",
		"ðŸ‡¨ðŸ‡¾",
		"ðŸ‡¨ðŸ‡¿",
		"ðŸ‡©ðŸ‡°",
		"ðŸ‡©ðŸ‡¯",
		"ðŸ‡©ðŸ‡²",
		"ðŸ‡©ðŸ‡´",
		"ðŸ‡ªðŸ‡¨",
		"ðŸ‡ªðŸ‡¬",
		"ðŸ‡¸ðŸ‡»",
		"ðŸ‡¬ðŸ‡¶",
		"ðŸ‡ªðŸ‡·",
		"ðŸ‡ªðŸ‡ª",
		"ðŸ‡¸ðŸ‡¿",
		"ðŸ‡ªðŸ‡¹",
		"ðŸ‡ªðŸ‡º",
		"ðŸ‡«ðŸ‡°",
		"ðŸ‡«ðŸ‡´",
		"ðŸ‡«ðŸ‡¯",
		"ðŸ‡«ðŸ‡®",
		"ðŸ‡«ðŸ‡·",
		"ðŸ‡¬ðŸ‡«",
		"ðŸ‡µðŸ‡«",
		"ðŸ‡¹ðŸ‡«",
		"ðŸ‡¬ðŸ‡¦",
		"ðŸ‡¬ðŸ‡²",
		"ðŸ‡¬ðŸ‡ª",
		"ðŸ‡©ðŸ‡ª",
		"ðŸ‡¬ðŸ‡­",
		"ðŸ‡¬ðŸ‡®",
		"ðŸ‡¬ðŸ‡·",
		"ðŸ‡¬ðŸ‡±",
		"ðŸ‡¬ðŸ‡©",
		"ðŸ‡¬ðŸ‡µ",
		"ðŸ‡¬ðŸ‡º",
		"ðŸ‡¬ðŸ‡¹",
		"ðŸ‡¬ðŸ‡¬",
		"ðŸ‡¬ðŸ‡³",
		"ðŸ‡¬ðŸ‡¼",
		"ðŸ‡¬ðŸ‡¾",
		"ðŸ‡­ðŸ‡¹",
		"ðŸ‡­ðŸ‡³",
		"ðŸ‡­ðŸ‡°",
		"ðŸ‡­ðŸ‡º",
		"ðŸ‡®ðŸ‡¸",
		"ðŸ‡®ðŸ‡³",
		"ðŸ‡®ðŸ‡©",
		"ðŸ‡®ðŸ‡·",
		"ðŸ‡®ðŸ‡¶",
		"ðŸ‡®ðŸ‡ª",
		"ðŸ‡®ðŸ‡²",
		"ðŸ‡®ðŸ‡±",
		"ðŸ‡®ðŸ‡¹",
		"ðŸ‡¯ðŸ‡²",
		"ðŸ‡¯ðŸ‡µ",
		"ðŸŽŒ",
		"ðŸ‡¯ðŸ‡ª",
		"ðŸ‡¯ðŸ‡´",
		"ðŸ‡°ðŸ‡¿",
		"ðŸ‡°ðŸ‡ª",
		"ðŸ‡°ðŸ‡®",
		"ðŸ‡½ðŸ‡°",
		"ðŸ‡°ðŸ‡¼",
		"ðŸ‡°ðŸ‡¬",
		"ðŸ‡±ðŸ‡¦",
		"ðŸ‡±ðŸ‡»",
		"ðŸ‡±ðŸ‡§",
		"ðŸ‡±ðŸ‡¸",
		"ðŸ‡±ðŸ‡·",
		"ðŸ‡±ðŸ‡¾",
		"ðŸ‡±ðŸ‡®",
		"ðŸ‡±ðŸ‡¹",
		"ðŸ‡±ðŸ‡º",
		"ðŸ‡²ðŸ‡´",
		"ðŸ‡²ðŸ‡¬",
		"ðŸ‡²ðŸ‡¼",
		"ðŸ‡²ðŸ‡¾",
		"ðŸ‡²ðŸ‡»",
		"ðŸ‡²ðŸ‡±",
		"ðŸ‡²ðŸ‡¹",
		"ðŸ‡²ðŸ‡­",
		"ðŸ‡²ðŸ‡¶",
		"ðŸ‡²ðŸ‡·",
		"ðŸ‡²ðŸ‡º",
		"ðŸ‡¾ðŸ‡¹",
		"ðŸ‡²ðŸ‡½",
		"ðŸ‡«ðŸ‡²",
		"ðŸ‡²ðŸ‡©",
		"ðŸ‡²ðŸ‡¨",
		"ðŸ‡²ðŸ‡³",
		"ðŸ‡²ðŸ‡ª",
		"ðŸ‡²ðŸ‡¸",
		"ðŸ‡²ðŸ‡¦",
		"ðŸ‡²ðŸ‡¿",
		"ðŸ‡²ðŸ‡²",
		"ðŸ‡³ðŸ‡¦",
		"ðŸ‡³ðŸ‡·",
		"ðŸ‡³ðŸ‡µ",
		"ðŸ‡³ðŸ‡±",
		"ðŸ‡³ðŸ‡¨",
		"ðŸ‡³ðŸ‡¿",
		"ðŸ‡³ðŸ‡®",
		"ðŸ‡³ðŸ‡ª",
		"ðŸ‡³ðŸ‡¬",
		"ðŸ‡³ðŸ‡º",
		"ðŸ‡³ðŸ‡«",
		"ðŸ‡°ðŸ‡µ",
		"ðŸ‡²ðŸ‡°",
		"ðŸ‡²ðŸ‡µ",
		"ðŸ‡³ðŸ‡´",
		"ðŸ‡´ðŸ‡²",
		"ðŸ‡µðŸ‡°",
		"ðŸ‡µðŸ‡¼",
		"ðŸ‡µðŸ‡¸",
		"ðŸ‡µðŸ‡¦",
		"ðŸ‡µðŸ‡¬",
		"ðŸ‡µðŸ‡¾",
		"ðŸ‡µðŸ‡ª",
		"ðŸ‡µðŸ‡­",
		"ðŸ‡µðŸ‡³",
		"ðŸ‡µðŸ‡±",
		"ðŸ‡µðŸ‡¹",
		"ðŸ‡µðŸ‡·",
		"ðŸ‡¶ðŸ‡¦",
		"ðŸ‡·ðŸ‡ª",
		"ðŸ‡·ðŸ‡´",
		"ðŸ‡·ðŸ‡º",
		"ðŸ‡·ðŸ‡¼",
		"ðŸ‡¼ðŸ‡¸",
		"ðŸ‡¸ðŸ‡²",
		"ðŸ‡¸ðŸ‡¦",
		"ðŸ‡¸ðŸ‡³",
		"ðŸ‡·ðŸ‡¸",
		"ðŸ‡¸ðŸ‡¨",
		"ðŸ‡¸ðŸ‡±",
		"ðŸ‡¸ðŸ‡¬",
		"ðŸ‡¸ðŸ‡½",
		"ðŸ‡¸ðŸ‡°",
		"ðŸ‡¸ðŸ‡®",
		"ðŸ‡¬ðŸ‡¸",
		"ðŸ‡¸ðŸ‡§",
		"ðŸ‡¸ðŸ‡´",
		"ðŸ‡¿ðŸ‡¦",
		"ðŸ‡°ðŸ‡·",
		"ðŸ‡¸ðŸ‡¸",
		"ðŸ‡ªðŸ‡¸",
		"ðŸ‡±ðŸ‡°",
		"ðŸ‡§ðŸ‡±",
		"ðŸ‡¸ðŸ‡­",
		"ðŸ‡°ðŸ‡³",
		"ðŸ‡±ðŸ‡¨",
		"ðŸ‡µðŸ‡²",
		"ðŸ‡»ðŸ‡¨",
		"ðŸ‡¸ðŸ‡©",
		"ðŸ‡¸ðŸ‡·",
		"ðŸ‡¸ðŸ‡ª",
		"ðŸ‡¨ðŸ‡­",
		"ðŸ‡¸ðŸ‡¾",
		"ðŸ‡¹ðŸ‡¼",
		"ðŸ‡¹ðŸ‡¯",
		"ðŸ‡¹ðŸ‡¿",
		"ðŸ‡¹ðŸ‡­",
		"ðŸ‡¹ðŸ‡±",
		"ðŸ‡¹ðŸ‡¬",
		"ðŸ‡¹ðŸ‡°",
		"ðŸ‡¹ðŸ‡´",
		"ðŸ‡¹ðŸ‡¹",
		"ðŸ‡¹ðŸ‡³",
		"ðŸ‡¹ðŸ‡·",
		"ðŸ‡¹ðŸ‡²",
		"ðŸ‡¹ðŸ‡¨",
		"ðŸ‡¹ðŸ‡»",
		"ðŸ‡»ðŸ‡®",
		"ðŸ‡ºðŸ‡¬",
		"ðŸ‡ºðŸ‡¦",
		"ðŸ‡¦ðŸ‡ª",
		"ðŸ‡¬ðŸ‡§",
		"ðŸ´ó §ó ¢ó ¥ó ®ó §ó ¿",
		"ðŸ´ó §ó ¢ó ³ó £ó ´ó ¿",
		"ðŸ´ó §ó ¢ó ·ó ¬ó ³ó ¿",
		"ðŸ‡ºðŸ‡¸",
		"ðŸ‡ºðŸ‡¾",
		"ðŸ‡ºðŸ‡¿",
		"ðŸ‡»ðŸ‡º",
		"ðŸ‡»ðŸ‡¦",
		"ðŸ‡»ðŸ‡ª",
		"ðŸ‡»ðŸ‡³",
		"ðŸ‡¼ðŸ‡«",
		"ðŸ‡ªðŸ‡­",
		"ðŸ‡¾ðŸ‡ª",
		"ðŸ‡¿ðŸ‡²",
		"ðŸ‡¿ðŸ‡¼",
	],
};

interface EmojiPickerProps {
	onSelect: (emoji: string) => void;
	onClose: () => void;
}

const EmojiPicker: React.FC<EmojiPickerProps> = ({ onSelect, onClose }) => {
	const [search, setSearch] = useState("");
	const [recentEmojis, setRecentEmojis] = useState<string[]>([]);
	const pickerRef = useRef<HTMLDivElement>(null);

	// Load recently used emojis from localStorage
	useEffect(() => {
		const savedEmojis = localStorage.getItem("recentEmojis");
		if (savedEmojis) {
			setRecentEmojis(JSON.parse(savedEmojis));
		}
	}, []);

	// Save recently used emojis to localStorage
	const handleSelect = (emoji: string) => {
		onSelect(emoji);
		const updatedRecentEmojis = [
			emoji,
			...recentEmojis.filter((e) => e !== emoji).slice(0, 9), // Keep only the last 10
		];
		setRecentEmojis(updatedRecentEmojis);
		localStorage.setItem(
			"recentEmojis",
			JSON.stringify(updatedRecentEmojis)
		);
	};

	// Close picker when clicking outside
	useEffect(() => {
		const handleClickOutside = (event: MouseEvent) => {
			if (
				pickerRef.current &&
				!pickerRef.current.contains(event.target as Node)
			) {
				onClose();
			}
		};
		document.addEventListener("mousedown", handleClickOutside);
		return () =>
			document.removeEventListener("mousedown", handleClickOutside);
	}, [onClose]);

	// Filter emojis based on search
	const filteredEmojis = Object.entries(emojiCategories).reduce(
		(acc, [category, emojis]) => {
			const filtered = emojis.filter((emoji) => emoji.includes(search));
			if (filtered.length > 0) acc[category] = filtered;
			return acc;
		},
		{} as Record<string, string[]>
	);

	// Get all items (categories + emojis) for the grid
	const getCategoryData = () => {
		const items: Array<{ type: "category" | "emoji"; content: string }> =
			[];

		if (recentEmojis.length > 0) {
			items.push({ type: "category", content: "RECENTLY USED" });
			items.push(
				...recentEmojis.map((emoji) => ({
					type: "emoji" as const,
					content: emoji,
				}))
			);
		}

		Object.entries(filteredEmojis).forEach(([category, emojis]) => {
			items.push({ type: "category" as const, content: category });
			items.push(
				...emojis.map((emoji) => ({
					type: "emoji" as const,
					content: emoji,
				}))
			);
		});

		return items;
	};

	const allItems = getCategoryData();
	const ROWS = Math.ceil(allItems.length / COLUMNS);

	const Cell = ({
		columnIndex,
		rowIndex,
		style,
	}: GridChildComponentProps) => {
		const index = rowIndex * COLUMNS + columnIndex;
		const item = allItems[index];

		if (!item) return null;

		return item.type === "category" ? (
			<div
				style={{
					...style,
					width: `calc(100% - 20px)`, // Match picker width
					left: 10, // Align with container padding
					position: "absolute",
				}}
				className={styles.categoryTitle}>
				{item.content.toUpperCase()}
			</div>
		) : (
			<span
				style={{
					...style,
					width: `${EMOJI_SIZE}px !important`, // Force fixed width
				}}
				className={styles.emojiItem}
				onClick={() => handleSelect(item.content)}>
				{item.content}
			</span>
		);
	};
	return (
		<div ref={pickerRef} className={styles.emojiPicker}>
			<input
				type="text"
				placeholder="Search emoji..."
				className={styles.searchInput}
				value={search}
				onChange={(e) => setSearch(e.target.value)}
			/>
			<Grid
				className={styles.gridWrapper}
				columnCount={COLUMNS}
				columnWidth={EMOJI_SIZE}
				rowCount={ROWS}
				rowHeight={EMOJI_SIZE}
				height={300}
				width={EMOJI_SIZE * COLUMNS + 20} // Account for scrollbar
			>
				{Cell}
			</Grid>
		</div>
	);
};

export default EmojiPicker;
